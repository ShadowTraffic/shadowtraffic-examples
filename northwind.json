{
    "generators": [
        {
            "name": "regions",
            "table": "regions",
            "row": {
                "region_id": {
                    "_gen": "sequentialInteger",
                    "startingFrom": 1
                },
                "region_description": {
                    "_gen": "oneOf",
                    "choices": [
                        "Eastern",
                        "Western",
                        "Northern",
                        "Southern"
                    ]
                }
            },
            "localConfigs": {
                "maxEvents": 4
            }
        },
        {
            "name": "categories",
            "table": "categories",
            "row": {
                "category_id": {
                    "_gen": "sequentialInteger",
                    "startingFrom": 1
                },
                "category_name": {
                    "_gen": "oneOf",
                    "choices": [
                        "Beverages",
                        "Condiments",
                        "Confections",
                        "Dairy Products",
                        "Grains/Cereals",
                        "Meat/Poultry",
                        "Produce",
                        "Seafood"
                    ]
                },
                "description": {
                    "_gen": "string",
                    "expr": "#{Lorem.sentence}"
                }
            },
            "localConfigs": {
                "maxEvents": 8
            }
        },
        {
            "name": "suppliers",
            "table": "suppliers",
            "row": {
                "supplier_id": {
                    "_gen": "sequentialInteger",
                    "startingFrom": 1
                },
                "company_name": {
                    "_gen": "string",
                    "expr": "#{Company.name}"
                },
                "contact_name": {
                    "_gen": "string",
                    "expr": "#{Name.fullName}"
                },
                "contact_title": {
                    "_gen": "oneOf",
                    "choices": [
                        "Sales Representative",
                        "Marketing Manager",
                        "Sales Manager",
                        "Owner",
                        "Order Administrator"
                    ]
                },
                "address": {
                    "_gen": "string",
                    "expr": "#{Address.streetAddress}"
                },
                "city": {
                    "_gen": "string",
                    "expr": "#{Address.city}"
                },
                "region": {
                    "_gen": "string",
                    "expr": "#{Address.state}",
                    "null": {
                        "rate": 0.3
                    }
                },
                "postal_code": {
                    "_gen": "string",
                    "expr": "#{Address.zipCode}"
                },
                "country": {
                    "_gen": "oneOf",
                    "choices": [
                        "USA",
                        "UK",
                        "Japan",
                        "Spain",
                        "Australia",
                        "Brazil",
                        "Canada",
                        "Germany",
                        "France",
                        "Italy"
                    ]
                },
                "phone": {
                    "_gen": "string",
                    "expr": "#{PhoneNumber.phoneNumber}"
                }
            },
            "localConfigs": {
                "maxEvents": 29
            }
        },
        {
            "name": "shippers",
            "table": "shippers",
            "row": {
                "shipper_id": {
                    "_gen": "sequentialInteger",
                    "startingFrom": 1
                },
                "company_name": {
                    "_gen": "oneOf",
                    "choices": [
                        "Speedy Express",
                        "United Package",
                        "Federal Shipping"
                    ]
                },
                "phone": {
                    "_gen": "string",
                    "expr": "#{PhoneNumber.phoneNumber}"
                }
            },
            "localConfigs": {
                "maxEvents": 3
            }
        },
        {
            "name": "employees",
            "table": "employees",
            "row": {
                "employee_id": {
                    "_gen": "sequentialInteger",
                    "startingFrom": 1
                },
                "last_name": {
                    "_gen": "string",
                    "expr": "#{Name.lastName}"
                },
                "first_name": {
                    "_gen": "string",
                    "expr": "#{Name.firstName}"
                },
                "title": {
                    "_gen": "oneOf",
                    "choices": [
                        "Sales Representative",
                        "Vice President, Sales",
                        "Sales Manager",
                        "Inside Sales Coordinator"
                    ]
                },
                "title_of_courtesy": {
                    "_gen": "oneOf",
                    "choices": [
                        "Ms.",
                        "Dr.",
                        "Mr.",
                        "Mrs."
                    ]
                },
                "birth_date": {
                    "_gen": "normalDistribution",
                    "mean": 315532800000,
                    "sd": 157680000000
                },
                "hire_date": {
                    "_gen": "normalDistribution",
                    "mean": 757382400000,
                    "sd": 63072000000
                },
                "address": {
                    "_gen": "string",
                    "expr": "#{Address.streetAddress}"
                },
                "city": {
                    "_gen": "string",
                    "expr": "#{Address.city}"
                },
                "region": {
                    "_gen": "string",
                    "expr": "#{Address.state}",
                    "null": {
                        "rate": 0.3
                    }
                },
                "postal_code": {
                    "_gen": "string",
                    "expr": "#{Address.zipCode}"
                },
                "country": {
                    "_gen": "oneOf",
                    "choices": [
                        "USA",
                        "UK"
                    ]
                },
                "home_phone": {
                    "_gen": "string",
                    "expr": "#{PhoneNumber.phoneNumber}"
                },
                "extension": {
                    "_gen": "uniformDistribution",
                    "bounds": [100, 999],
                    "decimals": 0,
                    "cast": "string",
                    "sqlHint": "text"
                },
                "reports_to": {
                    "_gen": "uniformDistribution",
                    "bounds": [
                        1,
                        9
                    ],
                    "decimals": 0,
                    "null": {
                        "rate": 0.5
                    }
                }
            },
            "localConfigs": {
                "maxEvents": 9
            }
        },
        {
            "name": "customers",
            "table": "customers",
            "row": {
                "customer_id": {
                    "_gen": "characterString",
                    "case": "upper",
                    "n": 5
                },
                "company_name": {
                    "_gen": "string",
                    "expr": "#{Company.name}"
                },
                "contact_name": {
                    "_gen": "string",
                    "expr": "#{Name.fullName}"
                },
                "contact_title": {
                    "_gen": "oneOf",
                    "choices": [
                        "Owner",
                        "Sales Representative",
                        "Marketing Manager",
                        "Sales Manager",
                        "Accounting Manager",
                        "Sales Associate",
                        "Order Administrator"
                    ]
                },
                "address": {
                    "_gen": "string",
                    "expr": "#{Address.streetAddress}"
                },
                "city": {
                    "_gen": "string",
                    "expr": "#{Address.city}"
                },
                "region": {
                    "_gen": "string",
                    "expr": "#{Address.state}",
                    "null": {
                        "rate": 0.4
                    }
                },
                "postal_code": {
                    "_gen": "string",
                    "expr": "#{Address.zipCode}"
                },
                "country": {
                    "_gen": "oneOf",
                    "choices": [
                        "USA",
                        "Germany",
                        "Mexico",
                        "UK",
                        "Sweden",
                        "France",
                        "Spain",
                        "Canada",
                        "Argentina",
                        "Switzerland",
                        "Brazil",
                        "Austria",
                        "Italy",
                        "Portugal",
                        "Venezuela",
                        "Ireland",
                        "Belgium",
                        "Norway",
                        "Denmark",
                        "Finland",
                        "Poland"
                    ]
                },
                "phone": {
                    "_gen": "string",
                    "expr": "#{PhoneNumber.phoneNumber}"
                },
                "fax": {
                    "_gen": "string",
                    "expr": "#{PhoneNumber.phoneNumber}",
                    "null": {
                        "rate": 0.5
                    }
                }
            },
            "localConfigs": {
                "maxEvents": 91
            }
        },
        {
            "name": "products",
            "table": "products",
            "row": {
                "product_id": {
                    "_gen": "sequentialInteger",
                    "startingFrom": 1
                },
                "product_name": {
                    "_gen": "string",
                    "expr": "#{Commerce.productName}"
                },
                "supplier_id": {
                    "_gen": "lookup",
                    "table": "suppliers",
                    "path": [
                        "row",
                        "supplier_id"
                    ],
                    "histogram": {
                        "_gen": "histogram",
                        "bins": [
                            { "bin": 0.20, "frequency": 60 },
                            { "bin": 0.75, "frequency": 30 },
                            { "bin": 0.05, "frequency": 10 }
                        ]
                    }
                },
                "category_id": {
                    "_gen": "lookup",
                    "table": "categories",
                    "path": [
                        "row",
                        "category_id"
                    ],
                    "histogram": {
                        "_gen": "histogram",
                        "bins": [
                            { "bin": 0.75, "frequency": 55 },
                            { "bin": 0.15, "frequency": 30 },
                            { "bin": 0.10, "frequency": 15 }
                        ]
                    }
                },
                "quantity_per_unit": {
                    "_gen": "oneOf",
                    "choices": [
                        "10 boxes x 20 bags",
                        "24 - 12 oz bottles",
                        "12 - 550 ml bottles",
                        "48 - 6 oz jars",
                        "36 boxes",
                        "12 - 8 oz jars",
                        "12 - 1 lb pkgs.",
                        "10 - 500 g pkgs.",
                        "20 - 1 kg tins",
                        "10 pkgs."
                    ]
                },
                "unit_price": {
                    "_gen": "normalDistribution",
                    "mean": 28.5,
                    "sd": 15.0,
                    "decimals": 2,
                    "clamp": [1, 150]
                },
                "units_in_stock": {
                    "_gen": "uniformDistribution",
                    "bounds": [
                        0,
                        125
                    ],
                    "decimals": 0
                },
                "units_on_order": {
                    "_gen": "uniformDistribution",
                    "bounds": [
                        0,
                        70
                    ],
                    "decimals": 0
                },
                "reorder_level": {
                    "_gen": "uniformDistribution",
                    "bounds": [
                        0,
                        30
                    ],
                    "decimals": 0
                },
                "discontinued": {
                    "_gen": "weightedOneOf",
                    "choices": [
                        {
                            "weight": 9,
                            "value": false
                        },
                        {
                            "weight": 1,
                            "value": true
                        }
                    ]
                }
            },
            "localConfigs": {
                "maxEvents": 77
            }
        },
        {
            "name": "orders",
            "table": "orders",
            "varsOnce": {
                "now": {
                    "_gen": "now"
                }
            },
            "vars": {
                "customer_id": {
                    "_gen": "lookup",
                    "table": "customers",
                    "path": [
                        "row",
                        "customer_id"
                    ],
                    "histogram": {
                        "_gen": "histogram",
                        "bins": [
                            { "bin": 0.20, "frequency": 80 },
                            { "bin": 0.80, "frequency": 20 }
                        ]
                    }
                },
                "stop_boundary": {
                    "_gen": "cache",
                    "on": {
                        "_gen": "var",
                        "var": "customer_id"
                    },
                    "to": {
                        "_gen": "math",
                        "expr": "now - offset",
                        "names": {
                            "offset": {
                                "_gen": "uniformDistribution",
                                "bounds": [
                                    0,
                                    {
                                        "_gen": "duration",
                                        "days": 30
                                    }
                                ]
                            }
                        },
                        "decimals": 0
                    }
                },
                "order_date": {
                    "_gen": "uniformDistribution",
                    "bounds": [
                        {
                            "_gen": "math",
                            "expr": "now - oneYear",
                            "names": {
                                "oneYear": {
                                    "_gen": "duration",
                                    "days": 365
                                }
                            }
                        },
                        {
                            "_gen": "var",
                            "var": "stop_boundary"
                        }
                    ],
                    "decimals": 0
                }
            },
            "row": {
                "order_id": {
                    "_gen": "sequentialInteger",
                    "startingFrom": 10248
                },
                "customer_id": {
                    "_gen": "var",
                    "var": "customer_id"
                },
                "employee_id": {
                    "_gen": "lookup",
                    "table": "employees",
                    "path": [
                        "row",
                        "employee_id"
                    ],
                    "histogram": {
                        "_gen": "histogram",
                        "bins": [
                            { "bin": 0.20, "frequency": 70 },
                            { "bin": 0.50, "frequency": 20 },
                            { "bin": 0.30, "frequency": 10 }
                        ]
                    }
                },
                "order_date": {
                    "_gen": "var",
                    "var": "order_date"
                },
                "required_date": {
                    "_gen": "math",
                    "expr": "order_date + offset",
                    "names": {
                        "offset": {
                            "_gen": "uniformDistribution",
                            "bounds": [
                                {
                                    "_gen": "duration",
                                    "days": 1
                                },                                
                                {
                                    "_gen": "duration",
                                    "days": 7
                                }
                            ]
                        }
                    }
                },
                "shipped_date": {
                    "_gen": "math",
                    "expr": "order_date + offset",
                    "names": {
                        "offset": {
                            "_gen": "uniformDistribution",
                            "bounds": [
                                {
                                    "_gen": "duration",
                                    "days": 2
                                },                                
                                {
                                    "_gen": "duration",
                                    "days": 8
                                }
                            ]
                        }
                    }
                },
                "ship_via": {
                    "_gen": "lookup",
                    "table": "shippers",
                    "path": [
                        "row",
                        "shipper_id"
                    ],
                    "histogram": {
                        "_gen": "histogram",
                        "bins": [
                            { "bin": 0.30, "frequency": 60 },
                            { "bin": 0.67, "frequency": 30 },
                            { "bin": 0.03, "frequency": 10 }
                        ]
                    }
                },
                "freight": {
                    "_gen": "normalDistribution",
                    "mean": 78.5,
                    "sd": 15.0,
                    "decimals": 2
                },
                "ship_name": {
                    "_gen": "string",
                    "expr": "#{Company.name}"
                },
                "ship_address": {
                    "_gen": "string",
                    "expr": "#{Address.streetAddress}"
                },
                "ship_city": {
                    "_gen": "string",
                    "expr": "#{Address.city}"
                },
                "ship_region": {
                    "_gen": "string",
                    "expr": "#{Address.state}",
                    "null": {
                        "rate": 0.4
                    }
                },
                "ship_postal_code": {
                    "_gen": "string",
                    "expr": "#{Address.zipCode}"
                },
                "ship_country": {
                    "_gen": "weightedOneOf",
                    "choices": [
                        { "weight": 45, "value": "USA" },
                        { "weight": 15, "value": "Canada" },
                        { "weight": 12, "value": "UK" },
                        { "weight": 10, "value": "Germany" },
                        { "weight": 5, "value": "France" },
                        { "weight": 4, "value": "Mexico" },
                        { "weight": 3, "value": "Spain" },
                        { "weight": 2, "value": "Italy" },
                        { "weight": 2, "value": "Brazil" },
                        { "weight": 1, "value": "Argentina" },
                        { "weight": 1, "value": "Switzerland" },
                        { "weight": 0.5, "value": "Austria" },
                        { "weight": 0.5, "value": "Sweden" }
                    ]
                }
            }
        },
        {
            "name": "order_details",
            "table": "order_details",
            "fork": {
                "key": {
                    "_gen": "lookup",
                    "table": "orders"
                },
                "oneTimeKeys": true
            },
            "localConfigs": {
                "maxEvents": {
                    "_gen": "weightedOneOf",
                    "choices": [
                        {
                            "weight": 3,
                            "value": 1
                        },
                        {
                            "weight": 1,
                            "value": {
                                "_gen": "uniformDistribution",
                                "bounds": [2, 7]
                            }
                        }
                    ],
                    "decimals": 0
                }
            },
            "vars": {
                "product": {
                    "_gen": "lookup",
                    "table": "products",
                    "path": [
                        "row"
                    ],
                    "histogram": {
                        "_gen": "histogram",
                        "bins": [
                            { "bin": 0.10, "frequency": 50 },
                            { "bin": 0.30, "frequency": 35 },
                            { "bin": 0.60, "frequency": 15 }
                        ]
                    }
                }
            },
            "row": {
                "order_id": {
                    "_gen": "var",
                    "var": "forkKey",
                    "path": [
                        "row",
                        "order_id"
                    ]
                },
                "product_id": {
                    "_gen": "var",
                    "var": "product",
                    "path": [
                        "product_id"
                    ]
                },
                "unit_price": {
                    "_gen": "var",
                    "var": "product",
                    "path": [
                        "unit_price"
                    ]
                },
                "quantity": {
                    "_gen": "weightedOneOf",
                    "choices": [
                        {
                            "weight": 4,
                            "value": {
                                "_gen": "uniformDistribution",
                                "bounds": [1, 2]
                            }
                        },
                        {
                            "weight": 1,
                            "value": {
                                "_gen": "normalDistribution",
                                "mean": 5,
                                "sd": 2
                            }
                        }
                    ],
                    "decimals": 0
                },
                "discount": {
                    "_gen": "weightedOneOf",
                    "choices": [
                        {
                            "weight": 6,
                            "value": 0
                        },
                        {
                            "weight": 2,
                            "value": 0.05
                        },
                        {
                            "weight": 1,
                            "value": 0.1
                        },
                        {
                            "weight": 1,
                            "value": 0.15
                        },
                        {
                            "weight": 1,
                            "value": 0.2
                        },
                        {
                            "weight": 1,
                            "value": 0.25
                        }
                    ]
                }
            }
        },
        {
            "name": "territories",
            "table": "territories",
            "row": {
                "territory_id": {
                    "_gen": "uniformDistribution",
                    "bounds": [1581, 99999],
                    "cast": "string",
                    "sqlHint": "text"
                },
                "territory_description": {
                    "_gen": "string",
                    "expr": "#{Address.cityName}"
                },
                "region_id": {
                    "_gen": "lookup",
                    "table": "regions",
                    "path": [
                        "row",
                        "region_id"
                    ],
                    "histogram": {
                        "_gen": "histogram",
                        "bins": [
                            { "bin": 0.45, "frequency": 60 },
                            { "bin": 0.25, "frequency": 30 },
                            { "bin": 0.20, "frequency": 20 },
                            { "bin": 0.10, "frequency": 10 }
                        ]
                    }
                }
            },
            "localConfigs": {
                "maxEvents": 53
            }
        },
        {
            "name": "employee_territories",
            "table": "employee_territories",
            "row": {
                "employee_id": {
                    "_gen": "lookup",
                    "table": "employees",
                    "path": [
                        "row",
                        "employee_id"
                    ],
                    "histogram": {
                        "_gen": "histogram",
                        "bins": [
                            { "bin": 0.20, "frequency": 70 },
                            { "bin": 0.50, "frequency": 20 },
                            { "bin": 0.30, "frequency": 10 }
                        ]
                    }
                },
                "territory_id": {
                    "_gen": "lookup",
                    "table": "territories",
                    "path": [
                        "row",
                        "territory_id"
                    ],
                    "histogram": {
                        "_gen": "histogram",
                        "bins": [
                            { "bin": 0.25, "frequency": 50 },
                            { "bin": 0.65, "frequency": 30 },
                            { "bin": 0.10, "frequency": 15 }
                        ]
                    }
                }
            },
            "localConfigs": {
                "maxEvents": 49
            }
        }
    ],
    "schedule": {
        "stages": [
            {
                "generators": [
                    "regions",
                    "categories",
                    "suppliers",
                    "shippers"
                ]
            },
            {
                "generators": [
                    "employees",
                    "customers",
                    "products",
                    "territories"
                ]
            },
            {
                "generators": [
                    "employee_territories"
                ]
            },
            {
                "generators": [
                    "orders",
                    "order_details"
                ]
            }
        ]
    },
    "connections": {
        "md": {
            "kind": "motherduck",
            "tablePolicy": "dropAndCreate",
            "connectionConfigs": {
                "token": {
                    "_gen": "env",
                    "var": "MOTHERDUCK_TOKEN",
                    "mask": true
                },
                "db": "my_db"
            }
        }
    }
}
